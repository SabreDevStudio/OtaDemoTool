<div ng-class="{'SDSSearchInProgressUponClicked': searchStatus.searchInProgress}">

    <div ng-if="searchStatus.searchInProgress" class="row">
        <search-in-progress-message search-params="searchParams"/>
    </div>

    <div class="row">

        <div class="col-lg-2" ng-if="::searchStatus.searchCompletedSuccessful" visible-lg>
            <div class="panel panel-default" ng-show="priceTrendsSearchCompletedSuccessful">
                <div class="panel-heading SDS-panel-heading">
                    <h5 class="panel-title text-center">Price trends</h5>
                </div>
                <div class="panel-body SDS-panel-body">

                    <low-fare-history class="embeddedWidget"
                                      hide-chart-labels="true"
                                      hide-header="true"
                                      min-days-data-required="8"
                                      show-chart-labels="false"
                                      origin="{{lastSuccessfulSearchCriteria.getTripOrigin()}}"
                                      destination="{{lastSuccessfulSearchCriteria.getTripDestination()}}"
                                      departure-date="{{lastSuccessfulSearchCriteria.getTripDepartureDateTime().format()}}"
                                      return-date="{{lastSuccessfulSearchCriteria.getTripReturnDateTime().format()}}"
                                      search-completed-success-callback="priceTrendsSearchCompleteSuccessful(searchResults, searchCriteria)">
                    </low-fare-history>

                    <fare-forecast class="embeddedWidget"
                                   origin="{{lastSuccessfulSearchCriteria.getTripOrigin()}}"
                                   destination="{{lastSuccessfulSearchCriteria.getTripDestination()}}"
                                   departure-date="{{lastSuccessfulSearchCriteria.getTripDepartureDateTime().format()}}"
                                   return-date="{{lastSuccessfulSearchCriteria.getTripReturnDateTime().format()}}"
                                   search-completed-success-callback="priceTrendsSearchCompleteSuccessful(searchResults, searchCriteria)">
                    </fare-forecast>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-body SDS-panel-body">
                    <div class="text-center">
                        <fare-nabber type="button" class="btn btn-primary btn-sm"
                                     origin="{{lastSuccessfulSearchCriteria.getTripOrigin()}}"
                                     destination="{{lastSuccessfulSearchCriteria.getTripDestination()}}"
                                     departure-date="{{lastSuccessfulSearchCriteria.getTripDepartureDateTime().format()}}"
                                     return-date="{{lastSuccessfulSearchCriteria.getTripReturnDateTime().format()}}"
                                     passenger-type="ADT"
                                     passenger-count="{{lastSuccessfulSearchCriteria.getTotalPassengerCount()}}"
                                     maximum-acceptable-price="{{latestLeadPrice.price}}"
                                     maximum-acceptable-price-currency="{{latestLeadPrice.currency}}">
                            Subscribe for price alerts
                        </fare-nabber>
                    </div>
                </div>
            </div>

            <filters-panel id="ItineraryListFilterPane"></filters-panel>
        </div>

        <div class="col-lg-10 small-padding">
            <itinerary-list class="embeddedWidget" id="ItineraryList"
                            active-search="true" active-search-web-service="{{searchStrategy}}"
                            search-criteria="newSearchCriteria"
                            selected-itinerary-callback="itinerarySelectedCallback(itinerary)"
                            enable-itinerary-select-button="true"
                            search-started-callback="searchStartedCallback(searchCriteria)"
                            search-completed-success-callback="searchCompletedSuccessCallback(itineraries, searchCriteria)"
                            search-completed-error-callback="searchCompletedErrorCallback(errorMessages, searchCriteria)">
            </itinerary-list>
        </div>
    </div>

    <div ng-if="!searchStatus.searchInProgress && !searchStatus.searchCompletedSuccessful" class="row">
        <search-error-message search-params="searchParams"/>
    </div>

</div>